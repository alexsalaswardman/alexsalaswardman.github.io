let host="https://api1.acreplatforms.net",cssLoaded=!1,stage=0;const params={propertyValue:0,mortgageAmount:0,termMonths:0,type:"residential",purpose:"remortgage"},display=e=>{const a=e(".acre-widget");if(a){if(!cssLoaded){const a=e("head");a.append('<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">'),a.append(`<link rel="stylesheet" href="${host}/v1/acre/local-sourcing/widget/widget.css"/>`),cssLoaded=!0}switch(a.html(`${6!==stage?header:""}${parse(stages[stage])}${footer(stage)}`),stage){case 0:""!==params.purpose&&e(`input[type='radio'][value='${params.purpose}']`).prop("checked",!0),radioChange(e,"mType");break;case 1:valueChange(e);break;case 2:amountChange(e);break;case 4:""!==params.type&&e(`input[type='radio'][value='${params.type}']`).prop("checked",!0),radioChange(e,"pType");break;case 5:e.post(`${host}/v1/acre/local-sourcing/bestbuys`,params,e=>{a.html(`\n<h3>Best buys</h3>\n${drawTable(e)}\n<div class="disclaimer">\n    These are indicative best buy products for borrowing &pound;${params.mortgageAmount} over ${params.termMonths}\n    months, secured against a property valued at &pound;${params.propertyValue}.\n    Exact offers will depend on property type, location and your personal circumstances and status. E&amp;OE;\n</div>\n\n<div class="scrollFooter">\n<button onclick="back()" class="back">Back</button>   \n<div onclick="window.open('https://acresoftware.com', '_new')">\n    <div>Powered by</div> <img class="logo" src="${host}/v1/acre/local-sourcing/widget/acre.png" alt="Acre"/>\n</div>\n</div>\n                    `)},"json").fail(function(){e(".warning").html("Could not load best buy data")})}}},drawTable=e=>e.error?`<div class="warning">${e.error}</div>`:e.map(e=>`\n<h5>${e.title}</h5>\n<p>${e.name}</p>\n<table>\n    <thead>\n        <tr><th>Initial period</th><th>Rate</th><th>Monthly payment</th><th>&nbsp;</th></tr>\n    </thead>\n    <tbody>\n        <tr>\n            <td>${e.initialPeriod>0?e.initialPeriod+" months":"Term"}</td>\n            <td>${e.initialRate}%</td>\n            <td>&pound;${e.monthlyPayment}</td>\n            <td>${nextButton(stage)}</td>\n        </tr>\n    </tbody>\n</table>        \n`).join("\n"),parse=e=>{let a=params.termMonths>0?params.termMonths:300;const n=a%12,t=(a-n)/12;return e.replaceAll("__propertyValue",params.propertyValue>0?params.propertyValue:25e4).replaceAll("__mortgageAmount",params.mortgageAmount>0?params.mortgageAmount:params.propertyValue>0?.75*params.propertyValue:1e5).replaceAll("__years",t.toString()).replaceAll("__months",n.toString())},header="<h3>Quick mortgage calculator</h3>\n<div>",nextButton=e=>{switch(e){case 4:return'<button onclick="forward()" class="next">Show me</button>';case 5:return'<button onclick="forward()" class="next">Enquire</button>';case 6:return'<button onclick="forward()" class="next">Submit my details</button>';case 7:return"";default:return'<button onclick="forward()" class="next">Next</button>'}},footer=e=>`<div class="buttons">\n${e>0?'<button onclick="back()" class="back">Back</button>':""}\n${nextButton(e)}\n</div>\n<div id="footer" onclick="window.open('https://acresoftware.com', '_new')">\n<div>Powered by</div> <img class="logo" src="${host}/v1/acre/local-sourcing/widget/acre.png" alt="Acre"/>\n</div>\n</div>`,valueChange=e=>{const a=parseInt(e("#value").val());isNaN(a)?(e(".warning").html("You must enter a property value"),e(".next").attr("disabled",!0)):(e(".warning").html(""),e(".next").attr("disabled",!1))},amountChange=e=>{const a=parseInt(e("#value").val());a>params.propertyValue?(e(".warning").html("Loan amount must be less than value of property"),e(".next").attr("disabled",!0)):isNaN(a)?(e(".warning").html("You must enter a loan amount"),e(".next").attr("disabled",!0)):(e(".warning").html(""),e(".next").attr("disabled",!1))},radioChange=(e,a)=>{e(`input[name='${a}']`).parent().removeClass("checked");const n=e(`input[name='${a}']:checked`);if(0===n.length)return e(".next").attr("disabled",!0),void e(".warning").html("You must select an option");switch(e(".next").attr("disabled",!1),e(".warning").html(""),n.parent().addClass("checked"),a){case"mType":params.purpose=n.val();break;case"pType":params.type=n.val()}},stages=['\x3c!-- 0 --\x3e\n<div class="intro">By answering just five quick questions we\'ll be able to give you an idea of what offers are available from us right now.</div>\n<div class="intro">Are you looking to</div>\n<div class="radioGroup stack">\n<label for="mTypeRemo" class="radio">\n<input type="radio" name="mType" id="mTypeRemo" value="remortgage" onchange="radioChange($, \'mType\')"/>\nRemortgage your existing home\n</label>\n<label for="mTypeFTB" class="radio">\n<input type="radio" name="mType" id="mTypeFTB" value="ftb" onchange="radioChange($, \'mType\')"/>\nBuy a home for the first time\n</label>\n<label for="mTypeMove" class="radio">\n<input type="radio" name="mType" id="mTypeMove" value="move" onchange="radioChange($, \'mType\')"/>\nMove home\n</label>\n</div>\n','\x3c!-- 1 --\x3e\n<div class="intro">How much is your property worth?</div>\n<div class="currencyInput">\n    <label for="value">&pound;</label>\n    <input type="number" id="value" min="5000" max="2500000" value="__propertyValue" onchange="valueChange($)"/>\n</div>\n<div class="warning"></div>\n','\x3c!-- 2 --\x3e\n<div class="intro">How much do you wish to borrow?</div>\n<div class="currencyInput">\n    <label for="value">&pound;</label>\n    <input type="number" id="value" min="5000" max="2500000" value="__mortgageAmount" onChange="amountChange($)"/>\n</div>\n<div class="warning"></div>\n','\x3c!-- 3 --\x3e\n<div class="intro">How long do you wish to borrow for?</div>\n<div class="monthsYears">\n    <div class="timeInput">\n        <input type="number" id="years" min="2" max="40" value="__years"/>\n        <label for="years">Years</label>\n    </div>\n    <div class="timeInput">\n        <input type="number" id="months" min="0" max="12" value="__months"/>\n        <label for="months">Months</label>\n    </div>\n</div>\n<div class="warning"></div>\n','\x3c!-- 4 --\x3e\n<div class="intro">Is this property?</div>\n<div class="radioGroup">\n    <label for="pTypeRes" class="radio">\n        <input type="radio" name="pType" id="pTypeRes" value="residential" onChange="radioChange($, \'pType\')"/>\n        Residential\n    </label>\n    <label for="pTypeBTL" class="radio">\n        <input type="radio" name="pType" id="pTypeBTL" value="BTL" onChange="radioChange($, \'pType\')"/>\n        Buy to let\n    </label>\n</div>\n<div class="warning"></div>\n','\x3c!-- 5 --\x3e\n    <div class="results">Hold on whilst we load some mortgages...</div>\n    <div class="warning"></div>\n    ','\x3c!-- 6 --\x3e\n<div class="intro">\n    Please enter your contact information and we\'ll be in touch as soon as possible:\n</div>\n<div>\n    <label for="name">First name</label>\n    <input type="text" name="firstname" id="firstname"/>\n</div>\n<div>\n    <label for="name">Last name</label>\n    <input type="text" name="lastname" id="lastname"/>\n</div>\n<div>\n    <label for="phone">Your mobile number</label>\n    <input type="text" name="phone" id="phone"/>\n</div>\n<div>\n    <label for="email">Your email</label>\n    <input type="text" name="email" id="email"/>\n</div>\n    ',"\x3c!-- 7 --\x3e\n<div>Thank you for getting in contact. We'll be in touch as soon as we can.</div>\n"];window.onload=(()=>{$(display)});